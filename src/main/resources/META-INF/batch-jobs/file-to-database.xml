<?xml version="1.0" encoding="UTF-8"?>
<job id="file-to-datase" version="1.0"
     xmlns="http://xmlns.jcp.org/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="
      http://xmlns.jcp.org/xml/ns/javaee
      http://xmlns.jcp.org/xml/ns/javaee/jobXML_1_0.xsd">

  <step id="process">
    <chunk>
      <reader ref="org.apache.batchee.beanio.BeanIOReader">
        <properties>
          <property name="file" value="#{jobParameters['input']}"/>
          <property name="streamName" value="readerCSV"/>
          <property name="configuration" value="beanio.xml"/>
          <property name="skippedHeaderLines" value="5"/>
        </properties>
      </reader>
      <processor ref="org.apache.batchee.modelmapper.ModelMapperItemProcessor">
        <properties>
          <property name="matchingStrategy" value="LOOSE" />
          <property name="destinationType" value="com.supertribe.sample.financial.batch.writer.entity.JpaInstrument" />
        </properties>
      </processor>
      <writer ref="jpa" />
    </chunk>
  </step>

</job>
